;Compiling with rise4fun.com for z3
;Written by Paul Schmid with help from Dr. Lynch

;Variable declaration
;p is filler, x = 1, y = j, value = k
(declare-const p111 Bool)
(declare-const p112 Bool)
(declare-const p113 Bool)
(declare-const p114 Bool)
(declare-const p121 Bool)
(declare-const p122 Bool)
(declare-const p123 Bool)
(declare-const p124 Bool)
(declare-const p131 Bool)
(declare-const p132 Bool)
(declare-const p133 Bool)
(declare-const p134 Bool)
(declare-const p141 Bool)
(declare-const p142 Bool)
(declare-const p143 Bool)
(declare-const p144 Bool)
(declare-const p211 Bool)
(declare-const p212 Bool)
(declare-const p213 Bool)
(declare-const p214 Bool)
(declare-const p221 Bool)
(declare-const p222 Bool)
(declare-const p223 Bool)
(declare-const p224 Bool)
(declare-const p231 Bool)
(declare-const p232 Bool)
(declare-const p233 Bool)
(declare-const p234 Bool)
(declare-const p241 Bool)
(declare-const p242 Bool)
(declare-const p243 Bool)
(declare-const p244 Bool)
(declare-const p311 Bool)
(declare-const p312 Bool)
(declare-const p313 Bool)
(declare-const p314 Bool)
(declare-const p321 Bool)
(declare-const p322 Bool)
(declare-const p323 Bool)
(declare-const p324 Bool)
(declare-const p331 Bool)
(declare-const p332 Bool)
(declare-const p333 Bool)
(declare-const p334 Bool)
(declare-const p341 Bool)
(declare-const p342 Bool)
(declare-const p343 Bool)
(declare-const p344 Bool)
(declare-const p411 Bool)
(declare-const p412 Bool)
(declare-const p413 Bool)
(declare-const p414 Bool)
(declare-const p421 Bool)
(declare-const p422 Bool)
(declare-const p423 Bool)
(declare-const p424 Bool)
(declare-const p431 Bool)
(declare-const p432 Bool)
(declare-const p433 Bool)
(declare-const p434 Bool)
(declare-const p441 Bool)
(declare-const p442 Bool)
(declare-const p443 Bool)
(declare-const p444 Bool)

;Rule 1 - cant have the same number in the same row
(assert (not (and p111 p121)))
(assert (not (and p112 p122)))
(assert (not (and p113 p123)))
(assert (not (and p114 p124)))
(assert (not (and p121 p131)))
(assert (not (and p122 p132)))
(assert (not (and p123 p133)))
(assert (not (and p124 p134)))
(assert (not (and p131 p141)))
(assert (not (and p132 p142)))
(assert (not (and p133 p143)))
(assert (not (and p134 p144)))
(assert (not (and p211 p221)))
(assert (not (and p212 p222)))
(assert (not (and p213 p223)))
(assert (not (and p214 p224)))
(assert (not (and p221 p231)))
(assert (not (and p222 p232)))
(assert (not (and p223 p233)))
(assert (not (and p224 p234)))
(assert (not (and p231 p241)))
(assert (not (and p232 p242)))
(assert (not (and p233 p243)))
(assert (not (and p234 p244)))
(assert (not (and p311 p321)))
(assert (not (and p312 p322)))
(assert (not (and p313 p323)))
(assert (not (and p314 p324)))
(assert (not (and p321 p331)))
(assert (not (and p322 p332)))
(assert (not (and p323 p333)))
(assert (not (and p324 p334)))
(assert (not (and p331 p341)))
(assert (not (and p332 p342)))
(assert (not (and p333 p343)))
(assert (not (and p334 p344)))
(assert (not (and p411 p421)))
(assert (not (and p412 p422)))
(assert (not (and p413 p423)))
(assert (not (and p414 p424)))
(assert (not (and p421 p431)))
(assert (not (and p422 p432)))
(assert (not (and p423 p433)))
(assert (not (and p424 p434)))
(assert (not (and p431 p441)))
(assert (not (and p432 p442)))
(assert (not (and p433 p443)))
(assert (not (and p434 p444)))

;Rule 2 - cant have the same number in the same column
(assert (not (and p111 p211)))
(assert (not (and p112 p212)))
(assert (not (and p113 p213)))
(assert (not (and p114 p214)))
(assert (not (and p121 p221)))
(assert (not (and p122 p222)))
(assert (not (and p123 p223)))
(assert (not (and p124 p224)))
(assert (not (and p131 p231)))
(assert (not (and p132 p232)))
(assert (not (and p133 p233)))
(assert (not (and p134 p234)))
(assert (not (and p141 p241)))
(assert (not (and p142 p242)))
(assert (not (and p143 p243)))
(assert (not (and p144 p244)))
(assert (not (and p211 p311)))
(assert (not (and p212 p312)))
(assert (not (and p213 p313)))
(assert (not (and p214 p314)))
(assert (not (and p221 p321)))
(assert (not (and p222 p322)))
(assert (not (and p223 p323)))
(assert (not (and p224 p324)))
(assert (not (and p231 p331)))
(assert (not (and p232 p332)))
(assert (not (and p233 p333)))
(assert (not (and p234 p334)))
(assert (not (and p241 p341)))
(assert (not (and p242 p342)))
(assert (not (and p243 p343)))
(assert (not (and p244 p344)))
(assert (not (and p311 p411)))
(assert (not (and p312 p412)))
(assert (not (and p313 p413)))
(assert (not (and p314 p414)))
(assert (not (and p321 p421)))
(assert (not (and p322 p422)))
(assert (not (and p323 p423)))
(assert (not (and p324 p424)))
(assert (not (and p331 p431)))
(assert (not (and p332 p432)))
(assert (not (and p333 p433)))
(assert (not (and p334 p434)))
(assert (not (and p341 p441)))
(assert (not (and p342 p442)))
(assert (not (and p343 p443)))
(assert (not (and p344 p444)))

;Rule 3 - each box of sqrt(n) cant contain the same number
(assert (xor p111 p121 p211 p221))
(assert (xor p112 p122 p212 p222))
(assert (xor p113 p123 p213 p223))
(assert (xor p114 p124 p214 p224))
(assert (xor p131 p141 p231 p241))
(assert (xor p132 p142 p232 p242))
(assert (xor p133 p143 p233 p243))
(assert (xor p134 p144 p234 p244))
(assert (xor p311 p321 p411 p421))
(assert (xor p312 p322 p412 p422))
(assert (xor p313 p323 p413 p423))
(assert (xor p314 p324 p414 p424))
(assert (xor p331 p341 p431 p441))
(assert (xor p332 p342 p432 p442))
(assert (xor p333 p343 p433 p443))
(assert (xor p334 p344 p434 p444))

;Rule 4 - each cell must have a number
(assert (or p111 p112 p113 p114))
(assert (or p121 p122 p123 p124))
(assert (or p131 p132 p133 p134))
(assert (or p141 p142 p143 p144))
(assert (or p211 p212 p213 p214))
(assert (or p221 p222 p223 p224))
(assert (or p231 p232 p233 p234))
(assert (or p241 p242 p243 p244))
(assert (or p311 p312 p313 p314))
(assert (or p321 p322 p323 p324))
(assert (or p331 p332 p333 p334))
(assert (or p341 p342 p343 p344))
(assert (or p411 p412 p413 p414))
(assert (or p421 p422 p423 p424))
(assert (or p431 p432 p433 p434))
(assert (or p441 p442 p443 p444))

;Rule 5 - No cell contains 2 digits (unnecessary)

;Inital Configuration with given:
;p121 p133 p212 p343 p422 p431 p444 
(assert (not p122))
(assert (not p123))
(assert (not p124))
(assert (not p131))
(assert (not p132))
(assert (not p134))
(assert (not p211))
(assert (not p213))
(assert (not p214))
(assert (not p341))
(assert (not p342))
(assert (not p344))
(assert (not p421))
(assert (not p423))
(assert (not p424))
(assert (not p432))
(assert (not p433))
(assert (not p434))
(assert (not p441))
(assert (not p442))
(assert (not p443))

(check-sat)
(get-model)
(exit)